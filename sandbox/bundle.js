var GM;
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GrowMap": () => (/* binding */ GrowMap)
/* harmony export */ });
var GrowMap = /** @class */ (function () {
    function GrowMap(container, things) {
        var _this = this;
        this.prepareThings = function () {
            var things = _this.things;
            function prepareThing(thing, i) {
                var preparedThing = {
                    name: thing.name,
                    position: {
                        x: 0,
                        y: 0,
                    }
                };
                // Вычисляем ширину и высоту
                // Нужно вычислить положение блока - но вычислить его можно токло после того как у предыдущего элемента есть ширина и высота
                // Что бы вычислить ширину и высоту нужно посчитать
                if (i !== 0) {
                    preparedThing.position.x = 0;
                    preparedThing.position.y = 0;
                }
                if (thing.children) {
                    preparedThing.children = thing.children.map(prepareThing);
                }
                return preparedThing;
            }
            _this.preparedThings = things.map(prepareThing);
            console.log('Things are prepared.');
        };
        this.init = function () {
            _this.prepareThings();
            console.log('App initialization is started.');
            _this.canvas = document.createElement('canvas');
            _this.ctx = _this.canvas.getContext('2d');
            var w = _this.container.clientWidth;
            var h = _this.container.clientHeight;
            _this.canvas.width = w;
            _this.canvas.height = h;
            _this.container.appendChild(_this.canvas);
            // this.ctx.translate(10, 10);
            _this.ctx.translate(_this.canvas.width / 2, _this.canvas.height / 2);
            var observedContainerData = {
                previousWidth: null,
                previousHeight: null,
            };
            var containerResizeObserver = new ResizeObserver(function (entries) {
                if (!!(observedContainerData.previousWidth && observedContainerData.previousHeight) &&
                    ((entries[0].contentRect.width !== observedContainerData.previousWidth) ||
                        (entries[0].contentRect.height !== observedContainerData.previousHeight))) {
                    console.warn('Container size is changed - reload the app.');
                    containerResizeObserver.unobserve(_this.container);
                    _this.reload();
                }
                observedContainerData.previousWidth = entries[0].contentRect.width;
                observedContainerData.previousHeight = entries[0].contentRect.height;
            });
            containerResizeObserver.observe(_this.container);
            console.log('App is started.');
            window.requestAnimationFrame(function () {
                _this.drawBG();
                _this.drawRectangle({ name: '32523523523523523 \n\n 5235235235235235' });
            });
        };
        this.reload = function () {
            console.log('App reload is started.');
            _this.container.innerHTML = '';
            _this.init();
        };
        this.getThingSize = function (thing) {
            var fontSize = 16;
            var textMetrics = _this.getTextSize(thing.name, fontSize);
            var p = fontSize / 4;
            var rectW = (p + textMetrics.width + p);
            var rectH = (p + _this.params.fontSize + p);
            return {
                fontSize: fontSize,
                width: 100,
                height: 100,
            };
        };
        this.drawRectangle = function (thing) {
            _this.params.fontSize = 20;
            var textMetrics = _this.getTextSize(thing.name, 60);
            console.log('textMetrics:', textMetrics);
            _this.ctx.fillStyle = _this.params.rectColor;
            var p = _this.params.fontSize / 4;
            var rectW = (textMetrics.width + p);
            var rectH = (_this.params.fontSize + p);
            _this.ctx.fillRect(0, 0, rectW, rectH);
            _this.drawText(thing.name, 10, (10 + _this.params.fontSize));
        };
        this.getTextSize = function (text, fontSize) {
            var previousFont = _this.ctx.font;
            _this.ctx.font = "".concat(fontSize, "px serif");
            var measuredText = _this.ctx.measureText(text);
            _this.ctx.font = previousFont;
            return measuredText;
        };
        this.drawText = function (text, x, y) {
            _this.ctx.font = "".concat(_this.params.fontSize, "px serif");
            _this.ctx.fillStyle = _this.params.fontColor;
            _this.ctx.fillText(text, x, y);
        };
        this.drawBG = function () {
            _this.ctx.fillStyle = _this.params.bgColor;
            _this.ctx.fillRect(-(_this.canvas.width / 2), -(_this.canvas.height / 2), _this.canvas.width, _this.canvas.height);
        };
        this.container = container;
        this.params = {
            bgColor: 'skyblue',
            fontSize: 40,
            fontColor: 'red',
            rectColor: 'white',
        };
        this.things = things;
        this.preparedThings = null;
    }
    return GrowMap;
}());


GM = __webpack_exports__;
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUMzQixJQUFJLENBQUMsTUFBTSxHQUFHO1lBQ1YsT0FBTyxFQUFFLFNBQVM7WUFDbEIsUUFBUSxFQUFFLEVBQUU7WUFDWixTQUFTLEVBQUUsS0FBSztZQUNoQixTQUFTLEVBQUUsT0FBTztTQUNyQjtRQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO0lBQy9CLENBQUM7SUE2SUwsY0FBQztBQUFELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9HTS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9HTS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vR00vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9HTS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL0dNLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLyoqXG4gKiDQmtCw0YDRgtCwINGA0L7RgdGC0LBcbiAqIFxuICog0KLRgNC10LHQvtCy0LDQvdC40Y86XG4gKiArIDEpINCf0YDQuCDRgdC+0LfQtNCw0L3QuNC4INC60LDRgNGC0Ysg0L3Rg9C20L3QviDRg9C60LDQt9Cw0YLRjCDQutC+0L3RgtC10LnQvdC10YBcbiAqICsgMikg0J/RgNC4INC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INC60LDRgNGC0Ysg0LIg0LrQvtC90YLQtdC50L3QtdGAINC00L7QsdCw0LLQu9GP0LXRgtGB0Y8g0LrQsNC90LLQsNGBXG4gKiArIDMpINCa0LDQvdCy0LDRgSDQtNC+0LvQttC10L0g0YDQsNGB0YLRj9C90YPRgtGM0YHRjyDQv9C+INGA0LDQt9C80LXRgNGDINC60L7QvdGC0LXQudC90LXRgNCwXG4gKiArIDQpINCa0LDQvdCy0LDRgSDQtNC+0LvQttC10L0g0YHQu9C10LTQuNGC0Ywg0LfQsCDRgNCw0LfQvNC10YDQvtC8INC60L7QvdGC0LXQudC90LXRgNCwINC4INC10YHQu9C4INC+0L0g0LzQtdC90Y/QtdGC0YHRjyAtINC/0LXRgNC10LfQsNCz0YDRg9C20LDRgtGMINC/0YDQuNC70L7QttC10L3QuNC1XG4gKiA1KSDQmtCw0L3QstCw0YEg0LTQvtC70LbQtdC9INC/0YDQuNC90LjQvNCw0YLRjCDQvdCwINCy0YXQvtC0INC+0LHRitC10LrRgiDQuNC70Lgg0LzQsNGB0YHQuNCyINC+0LHRhdC10LrRgtC+0LIg0Lgg0YDQuNGB0L7QstCw0YLRjCDQs9GA0LDRhNC40LrRg1xuICogNikg0JrQsNC80LXRgNCwINC00L7Qu9C20L3QsCDRhtC10L3RgtGA0L7QstCw0YLRjNGB0Y8g0L/QviDQs9C70LDQstC90L7QvNGDINC+0LHRjNC10LrRgtGDINC40LvQuCDQvdCw0LHQvtGA0YMg0LPQu9Cw0LLQvdGL0YUg0L7QsdGK0LXQutGC0L7QslxuICogNykg0JIg0L/RgNC+0LPRgNCw0LzQvNC1INC00L7Qu9C20LXQvSDQsdGL0YLRjCDRgNC10LDQu9C40LfQvtCy0LDQvSDQt9GD0LxcbiAqIDgpINCf0YDQvtCz0YDQsNC80LzQsCDQvNC+0LbQtdGCINCx0YvRgtGMINC30LDQv9GD0YnQtdC90LAg0LfQsNC30LDRg9C80LvQtdC90L7QuSDQuiDQvtGB0L3QvtCy0L3Ri9C8INC+0LHQtdC60YLQsNC8INC40LvQuCDQvtGF0LLQsNGC0YvQstCw0Y8g0L7QsdGJ0LjQuSDRgNCw0LfQvNC10YBcbiAqIDkpINC80LjQvdC40LzQsNC70YzQvdGL0Lkg0LfRg9C8INC+0L/RgNC10LTQtdC70Y/QtdGC0YHRjyDRgNCw0LfQvNC10YDQvtC8INC+0YHQvdC+0LLQvdC+0LPQviDQsdC70L7QutCwIC0g0LzQsNC60YHQuNC80LDQu9GM0L3Ri9C5INC30YPQvCDQvtGF0LLQsNGC0L7QvCDQstGB0LXRhSDQsdC70L7QutC+0LIg0L/Qu9GO0YEg0L7RgtGB0YLRg9C/0YtcbiAqIDEwKSDQoNCw0LfQu9C40YfQvdGL0LUg0L3QsNGB0YLRgNC+0LnQutC4INC80L7QttC90L4g0LLRi9Cy0L7QtNC40YLRjCDQvdCwINGN0LrRgNCw0L0g0YfRgtC+0LHRiyDQvdCw0YHRgtGA0LDQuNCy0LDRgtGMINC40YUg0L/QvtC70LfRg9C90LrQsNC80LhcbiAqIDExKSDQmtCw0LbQtNGL0Lkg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5INC+0LHRitC10LrRgiDQvNC+0LbQtdGCINC40LzQtdGC0Ywg0LTQvtGH0LXRgNC90LjQuVxuICogMTIpINCV0YHQu9C4INCyINC00L7Rh9C10YDQvdC10Lwg0L3QtSDRg9C60LDQt9Cw0L3QviDQsiDQutCw0LrRg9GOINGB0YLQvtGA0L7QvdGDINC+0L0g0YHQvNC10YnQsNC10YLRgdGPIC0g0YLQviDQvtC9INGB0LzQtdGJ0LDQtdGC0YHRjyDQsiDRgdC70YPRh9Cw0LnQvdGD0Y4g0YHRgtC+0YDQvtC90YNcbiAqIDEzKSDQlNC+0YfQtdGA0L3QuNC1INGN0LvQtdC80LXQvdGC0Ysg0LjQvNC10Y7RgiDQvtGC0YHRgtGD0L8g0L7RgiDRgNC+0LTQuNGC0LXQu9GM0YHQutC+0LrQviDQuCDRgtCw0Log0LbQtSDQuNC80LXQtdGCINC+0YLRgdGC0YPQvyDQvtGCINGB0LLQvtC40YUg0LrRg9C30LXQvdC+0LJcbiAqIDE0KSDQldGB0YLRjCDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINC80YvRiNC60L7QuSDQtNCy0LjQs9Cw0YLRjCDQutCw0LzQtdGA0YNcbiAqIDE1KSDQoyDQv9GA0LjQu9C+0LbQtdC90LjRjyDQtdGB0YLRjCDQvdC10LrQvtGC0L7RgNC+0LUg0YHQvtGB0YLQvtGP0L3QuNC1IC0g0YHQvtGB0YLQvtGP0L3QuNC1INGF0YDQsNC90LjRgiDQuNC90LjRhtC40LDQu9C40LfQuNGA0L7QstCw0L3QvdGL0LUg0L7QsdC10LrRgtGLINC4INC40YUg0YHQvtGB0YLQvtGP0L3QuNC1ICjRgNCw0YHQv9C+0LvQvtC20LXQvdC40LUg0Lgg0YLQsNC6INC00LDQu9C10LXQtSlcbiAqIDE2KSDQn9C+INGN0LvQtdC80LXQvdGC0YMg0LzQvtC20L3QviDQutC70LjQutC90YPRgtGMINC4INC/0L7Qu9GD0YfQuNGC0Ywg0LDQutGC0LjQstCw0LjRgNC+0LLQsNC90L3Ri9C5INGN0LvQtdC80LXQvdGCIC0g0Y3Qu9C10LzQtdC90YIg0LzQvtC20LXRgiDQsdGL0YLRjCDQv9C+0LTRgdCy0LXRh9C10L1cbiAqIDE3KSDQldGB0LvQuCDQv9GA0L7QuNGB0YXQvtC00LjRgiDQutC70LjQuiDQv9C+INC00YDRg9Cz0L7QvNGDINGN0LvQtdC80LXQvdGC0YMgLSDQv9GA0LXQtNGL0LTRg9GJ0LjQuSDQv9C10YDQtdGB0YLQsNC10YIg0LHRi9GC0Ywg0LDQutGC0LjQstC90YvQvFxuICogMTgpINCV0YHQu9C4INC60LvQuNC6INC90LUg0LHRi9C7INC60LvQuNC60L3Rg9GCINC90LUg0L/QviDQvtC00L3QvtC80YMg0Y3Qu9C10LzQtdC90YLRgyDRgtC+INC90LjQutCw0LrQvtCz0L4g0LDQutGC0LjQstC90L7Qs9C+INGN0LvQtdC80LXQvdGC0LAg0L3QtdGCXG4gKiAxOSkg0KMg0Y3Qu9C10LzQtdC90YLQvtCyINC10YHRgtGMIHotaW5kZXggLSB6IGluZGV4INCy0LvQuNGP0LXRgiDQvdCwINC+0YLRgNC40YHQvtCy0LrRgyDRjdC70LXQvNC10L3RgtC+0LJcbiAqIDIwKSDQktGB0LUg0LrRg9C30LXQvdGLINC40LzQtdGO0YIg0L7QtNC40L0g0Lgg0YLQvtGCINC20LUg0LjQvdC00LXQutGBIC0g0LLRgdC1INC00L7Rh9C10YDQvdC40LUg0L3QsCDQtdC00LjQvdC40YbRgyDQsdC+0LvRjNGI0LUg0YLQviDQtdGB0YLRjCDQvdC40LbQtVxuICogMjEpINCSINC60LDQttC00L7QvCDRjdC70LXQvNC10L3RgtC1L9Cx0LvQvtC60LUg0LzQvtC20L3QviDQvdCw0L/QuNGB0LDRgtGMINGC0LXQutGB0YIgLSDRgtC10LrRgdGCINC80LXQvdGP0LXRgiDRgNCw0LfQvNC10YAg0LHQu9C+0LrQsCDRjdC70LXQvNC10L3RgtCwIC0g0LLRgdC1INC+0YHRgtCw0LvRjNC90YvQtSDRjdC70LXQvNC10L3RgtGLINC/0L7QtNGB0YLRgNCw0LLQuNCy0LDRjtGC0YHRjyDQv9C+0LQg0L3QvtCy0YvQuSDRgNCw0LfQvNC10YAg0LHQu9C+0LrQsFxuICovXG50eXBlIFRoaW5nID0ge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBjaGlsZHJlbj86IEFycmF5PFRoaW5nPlxufVxuXG50eXBlIFRoaW5ncyA9IEFycmF5PFRoaW5nPjtcblxudHlwZSBQcmVwYXJlZFRoaW5nID0ge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBjaGlsZHJlbj86IEFycmF5PFByZXBhcmVkVGhpbmc+XG4gICAgcGFyZW50PzogUHJlcGFyZWRUaGluZztcbiAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHcm93TWFwIHtcbiAgICBjb250YWluZXI6IEVsZW1lbnQ7XG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBwYXJhbXM6IHtcbiAgICAgICAgYmdDb2xvcjogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZTogbnVtYmVyO1xuICAgICAgICBmb250Q29sb3I6IHN0cmluZztcbiAgICAgICAgcmVjdENvbG9yOiBzdHJpbmc7XG4gICAgfTtcbiAgICB0aGluZ3M6IFRoaW5ncztcbiAgICBwcmVwYXJlZFRoaW5nczogVGhpbmdzO1xuXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyOiBFbGVtZW50LCB0aGluZ3M6IFRoaW5ncykge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSB7XG4gICAgICAgICAgICBiZ0NvbG9yOiAnc2t5Ymx1ZScsXG4gICAgICAgICAgICBmb250U2l6ZTogNDAsXG4gICAgICAgICAgICBmb250Q29sb3I6ICdyZWQnLFxuICAgICAgICAgICAgcmVjdENvbG9yOiAnd2hpdGUnLFxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGhpbmdzID0gdGhpbmdzO1xuICAgICAgICB0aGlzLnByZXBhcmVkVGhpbmdzID0gbnVsbDtcbiAgICB9XG5cbiAgICBwcmVwYXJlVGhpbmdzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHRoaW5ncyB9ID0gdGhpcztcblxuICAgICAgICBmdW5jdGlvbiBwcmVwYXJlVGhpbmcodGhpbmc6IFRoaW5nLCBpOiBudW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkVGhpbmc6IFByZXBhcmVkVGhpbmcgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpbmcubmFtZSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g0JLRi9GH0LjRgdC70Y/QtdC8INGI0LjRgNC40L3RgyDQuCDQstGL0YHQvtGC0YNcblxuXG4gICAgICAgICAgICAvLyDQndGD0LbQvdC+INCy0YvRh9C40YHQu9C40YLRjCDQv9C+0LvQvtC20LXQvdC40LUg0LHQu9C+0LrQsCAtINC90L4g0LLRi9GH0LjRgdC70LjRgtGMINC10LPQviDQvNC+0LbQvdC+INGC0L7QutC70L4g0L/QvtGB0LvQtSDRgtC+0LPQviDQutCw0Log0YMg0L/RgNC10LTRi9C00YPRidC10LPQviDRjdC70LXQvNC10L3RgtCwINC10YHRgtGMINGI0LjRgNC40L3QsCDQuCDQstGL0YHQvtGC0LBcbiAgICAgICAgICAgIC8vINCn0YLQviDQsdGLINCy0YvRh9C40YHQu9C40YLRjCDRiNC40YDQuNC90YMg0Lgg0LLRi9GB0L7RgtGDINC90YPQttC90L4g0L/QvtGB0YfQuNGC0LDRgtGMXG4gICAgICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHByZXBhcmVkVGhpbmcucG9zaXRpb24ueCA9IDA7XG4gICAgICAgICAgICAgICAgcHJlcGFyZWRUaGluZy5wb3NpdGlvbi55ID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaW5nLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgcHJlcGFyZWRUaGluZy5jaGlsZHJlbiA9IHRoaW5nLmNoaWxkcmVuLm1hcChwcmVwYXJlVGhpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcHJlcGFyZWRUaGluZztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJlcGFyZWRUaGluZ3MgPSB0aGluZ3MubWFwKHByZXBhcmVUaGluZyk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1RoaW5ncyBhcmUgcHJlcGFyZWQuJyk7XG4gICAgfVxuXG4gICAgaW5pdCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5wcmVwYXJlVGhpbmdzKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0FwcCBpbml0aWFsaXphdGlvbiBpcyBzdGFydGVkLicpO1xuXG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICBjb25zdCB3ID0gdGhpcy5jb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIGNvbnN0IGggPSB0aGlzLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB3O1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBoO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XG5cbiAgICAgICAgLy8gdGhpcy5jdHgudHJhbnNsYXRlKDEwLCAxMCk7XG4gICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZSh0aGlzLmNhbnZhcy53aWR0aCAvIDIsIHRoaXMuY2FudmFzLmhlaWdodCAvIDIpO1xuXG4gICAgICAgIGNvbnN0IG9ic2VydmVkQ29udGFpbmVyRGF0YTogYW55ID0ge1xuICAgICAgICAgICAgcHJldmlvdXNXaWR0aDogbnVsbCxcbiAgICAgICAgICAgIHByZXZpb3VzSGVpZ2h0OiBudWxsLFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udGFpbmVyUmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhIShvYnNlcnZlZENvbnRhaW5lckRhdGEucHJldmlvdXNXaWR0aCAmJiBvYnNlcnZlZENvbnRhaW5lckRhdGEucHJldmlvdXNIZWlnaHQpICYmXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAoZW50cmllc1swXS5jb250ZW50UmVjdC53aWR0aCAhPT0gb2JzZXJ2ZWRDb250YWluZXJEYXRhLnByZXZpb3VzV2lkdGgpIHx8XG4gICAgICAgICAgICAgICAgICAgIChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LmhlaWdodCAhPT0gb2JzZXJ2ZWRDb250YWluZXJEYXRhLnByZXZpb3VzSGVpZ2h0KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ29udGFpbmVyIHNpemUgaXMgY2hhbmdlZCAtIHJlbG9hZCB0aGUgYXBwLicpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lclJlc2l6ZU9ic2VydmVyLnVub2JzZXJ2ZSh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWxvYWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb2JzZXJ2ZWRDb250YWluZXJEYXRhLnByZXZpb3VzV2lkdGggPSBlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoO1xuICAgICAgICAgICAgb2JzZXJ2ZWRDb250YWluZXJEYXRhLnByZXZpb3VzSGVpZ2h0ID0gZW50cmllc1swXS5jb250ZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250YWluZXJSZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMuY29udGFpbmVyKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnQXBwIGlzIHN0YXJ0ZWQuJyk7XG5cbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRyYXdCRygpO1xuICAgICAgICAgICAgdGhpcy5kcmF3UmVjdGFuZ2xlKHtuYW1lOiAnMzI1MjM1MjM1MjM1MjM1MjMgXFxuXFxuIDUyMzUyMzUyMzUyMzUyMzUnfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbG9hZCA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FwcCByZWxvYWQgaXMgc3RhcnRlZC4nKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIGdldFRoaW5nU2l6ZSA9ICh0aGluZzogVGhpbmcpID0+IHtcbiAgICAgICAgY29uc3QgZm9udFNpemUgPSAxNjtcbiAgICAgICAgY29uc3QgdGV4dE1ldHJpY3MgPSB0aGlzLmdldFRleHRTaXplKHRoaW5nLm5hbWUsIGZvbnRTaXplKTtcblxuICAgICAgICBjb25zdCBwID0gZm9udFNpemUgLyA0O1xuXG4gICAgICAgIGNvbnN0IHJlY3RXID0gKHAgKyB0ZXh0TWV0cmljcy53aWR0aCArIHApO1xuICAgICAgICBjb25zdCByZWN0SCA9IChwICsgdGhpcy5wYXJhbXMuZm9udFNpemUgKyBwKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9udFNpemU6IGZvbnRTaXplLFxuICAgICAgICAgICAgd2lkdGg6IDEwMCxcbiAgICAgICAgICAgIGhlaWdodDogMTAwLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhd1JlY3RhbmdsZSA9ICh0aGluZzogYW55KSA9PiB7XG4gICAgICAgIHRoaXMucGFyYW1zLmZvbnRTaXplID0gMjA7XG4gICAgICAgIGNvbnN0IHRleHRNZXRyaWNzID0gdGhpcy5nZXRUZXh0U2l6ZSh0aGluZy5uYW1lLCA2MCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0ZXh0TWV0cmljczonLCB0ZXh0TWV0cmljcyk7XG5cbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5wYXJhbXMucmVjdENvbG9yO1xuXG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcmFtcy5mb250U2l6ZSAvIDQ7XG5cbiAgICAgICAgY29uc3QgcmVjdFcgPSAodGV4dE1ldHJpY3Mud2lkdGggKyBwKTtcbiAgICAgICAgY29uc3QgcmVjdEggPSAodGhpcy5wYXJhbXMuZm9udFNpemUgKyBwKTtcblxuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCByZWN0VywgcmVjdEgpO1xuICAgICAgICB0aGlzLmRyYXdUZXh0KHRoaW5nLm5hbWUsIDEwLCAoMTAgKyB0aGlzLnBhcmFtcy5mb250U2l6ZSkpO1xuICAgIH1cblxuICAgIGdldFRleHRTaXplID0gKHRleHQ6IHN0cmluZywgZm9udFNpemU6IG51bWJlcik6IFRleHRNZXRyaWNzID0+IHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNGb250ID0gdGhpcy5jdHguZm9udDtcbiAgICAgICAgdGhpcy5jdHguZm9udCA9IGAke2ZvbnRTaXplfXB4IHNlcmlmYDtcbiAgICAgICAgY29uc3QgbWVhc3VyZWRUZXh0ID0gdGhpcy5jdHgubWVhc3VyZVRleHQodGV4dCk7XG4gICAgICAgIHRoaXMuY3R4LmZvbnQgPSBwcmV2aW91c0ZvbnQ7XG4gICAgICAgIHJldHVybiBtZWFzdXJlZFRleHQ7XG4gICAgfVxuXG4gICAgZHJhd1RleHQgPSAodGV4dDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xuICAgICAgICB0aGlzLmN0eC5mb250ID0gYCR7dGhpcy5wYXJhbXMuZm9udFNpemV9cHggc2VyaWZgO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLnBhcmFtcy5mb250Q29sb3I7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KHRleHQsIHgsIHkpO1xuICAgIH1cblxuICAgIGRyYXdCRyA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5wYXJhbXMuYmdDb2xvcjtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoLSh0aGlzLmNhbnZhcy53aWR0aCAvIDIpLCAtKHRoaXMuY2FudmFzLmhlaWdodCAvIDIpLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=